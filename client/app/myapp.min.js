"use strict";!function(){function t(){var t=angular.injector(["ng"]),e=t.get("$http");return e.get("/api/config").then(function(t){})}function e(){angular.element(document).ready(function(){angular.bootstrap(document,["myApp"])})}$.material.init();var n=angular.module("myApp",["ngRoute","satellizer","ngMaterial"]);n.config(["$routeProvider","$httpProvider","$authProvider",function(t,e,n){t.when("/Home",{templateUrl:"/app/views/home.html",controller:"homeCtrl",controllerAs:"vm"}).when("/Login",{templateUrl:"/app/views/login.html",controller:"loginCtrl",controllerAs:"vm"}).when("/Me",{templateUrl:"/app/views/me.html",controller:"meCtrl",controllerAs:"vm"}).when("/View/:id",{templateUrl:"/app/views/view.html",controller:"viewCtrl",controllerAs:"vm"}).when("/New",{templateUrl:"/app/views/new.html",controller:"newCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/Home"})}]),n.run(["$rootScope","$window","$auth","$http",function(t,e,n,o){if(n.isAuthenticated()&&e.localStorage.currentUser)try{t.currentUser=JSON.parse(e.localStorage.currentUser)}catch(a){}}]),t().then(e)}(),function(){var t=angular.module("myApp");t.controller("homeCtrl",["$http","$auth","$location",function(t,e,n){var o=this;o.isAuthenticated=e.isAuthenticated,o.loading=!0,o.message="",o.mails=[],o.open=function(t){console.log(t),n.path("/View/"+t.id)};var a=function(t){o.loading=!1,o.message=t.data,console.log(t.data)};t.get("/api/mail").then(function(t){o.loading=!1,o.mails=t.data,console.log(t.data)},a)}])}(),function(){var t=angular.module("myApp");t.controller("loginCtrl",["$rootScope","$http","$location","$auth","$window",function(t,e,n,o,a){var r=this;r.user={name:"",password:""},r.message="",r.login=function(){o.login(r.user).then(function(e){console.log(e),t.currentUser=e.data.user,a.localStorage.currentUser=JSON.stringify(e.data.user),n.path("/")})["catch"](function(t){t.error?r.message=t.error:t.data?r.message=t.data.message:r.message=t})}}])}(),function(){var t=angular.module("myApp");t.controller("meCtrl",["$scope","$http","$auth",function(t,e,n){var o=this;o.isAuthenticated=n.isAuthenticated}])}(),function(){var t=angular.module("myApp");t.controller("newCtrl",["$scope","$http","$auth",function(t,e,n){var o=this;o.isAuthenticated=n.isAuthenticated,o.loading=!1,o.message="",o.pin={title:"",url:""};var a=function(t){o.loading=!1,o.message=t.data,console.log(t.data)};o.addPin=function(){o.loading=!0,o.message="",e.post("/api/pin",o.pin).then(function(t){o.loading=!1,o.pin={title:"",url:""},$.snackbar({content:"Pin added."})},a)}}])}(),function(){var t=angular.module("myApp");t.controller("topNavCtrl",["$rootScope","$location","$auth","$http","$window",function(t,e,n,o,a){var r=this;r.isAuthenticated=function(){return n.isAuthenticated()},r.logout=function(){n.isAuthenticated()&&n.logout().then(function(){t.currentUser=null,a.localStorage.currentUser=null,e.path("/")})},r.getUsername=function(){return r.isAuthenticated()&&t.currentUser.name||""},r.isActive=function(t){return t===e.path()}}]),t.directive("topNav",function(){return{restrict:"E",templateUrl:"/app/views/top-nav.html",controller:"topNavCtrl",controllerAs:"vm"}})}(),function(){var t=angular.module("myApp");t.controller("viewCtrl",["$http","$auth","$routeParams",function(t,e){var n=this;n.isAuthenticated=e.isAuthenticated,n.loading=!0,n.message="",n.mails=[];var o=function(t){n.loading=!1,n.message=t.data,console.log(t.data)};t.get("/api/mail").then(function(t){n.loading=!1,n.mails=t.data,console.log(t.data)},o)}])}();